# 问题

DBMS利用事务来维护数据的一致性和完整性，为了支持各种事务特性，开发者设计了各种复杂机制如多版本并发控制。机制实现中的错误可能引入事务相关的错误（TXBug），导致数据库违反ACID属性。

目前已经提出了一些方法来测试TXBug，但仍不清楚现有方法有多有效，以及其局限性。

# 想法

对140个TXBug进行深入调查，并帮助建立一个数据集。

# 方案

* RQ1: TXBug是如何被触发的
* RQ2: TXBug的Root cause是什么
* RQ3: TXBug会有哪些影响
* RQ4: 如何修复TXBug
* RQ5: 现有检测方法的检测能力如何

筛选Bug方法：

* 重点关注过去5年的问题
* 手动筛查是否确实为TXBug，如果一个问题至少需要一个显式事务/两个事务来触发，则算作TXBug

# 结论

## 总结

* 几乎所有（93.6%）的TXBugs可以通过少量事务(<3)和语句(<4)触发，所需要的数据量不超过5行。
* 大多数TXBugs（94.3%）可以确定性地触发，这意味着如果遵循特定的事务顺序，其发生是可预测的。
* 研究的TXBugs违反了5种语义：原子性、一致性、隔离性、只读约束和语句正确性。但现有工作集中在隔离性上。
* 大多数TXBugs（76.4%）会导致静默失败，即不会引发明确的错误，但可能导致不正确的状态或结果，难以检测。
* 现有方法只能检测不到一半（45.7%）的TXBugs，这表明需要更有效的检测方法。

## Root Cause

* 原子性：事务中并非所有语句都成功/ 回滚事务的修改没有被还原。
* 一致性：
  * 数据库状态的一致性违背，比如说维护了错误的信息
  * 应用状态的一致性违背：错误的更新数据库中的值
  * 数据库约束的一致性违背：打破了数据库中的约束
* 隔离性：过度或较弱的隔离
* 只读约束：只读事务成功执行修改操作
* 语句正确性
